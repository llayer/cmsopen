{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 88,
   "id": "eleven-immigration",
   "metadata": {},
   "outputs": [],
   "source": [
    "import pandas as pd\n",
    "import numpy as np\n",
    "import selection\n",
    "import weights\n",
    "import btag\n",
    "import root_pandas\n",
    "import importlib\n",
    "import jetmet\n",
    "import hl"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 62,
   "id": "unlimited-inclusion",
   "metadata": {},
   "outputs": [],
   "source": [
    "mc = ['TTJets']\n",
    "corrections = [\"jes_up\", \"jes_down\", \"tau_eup\", \"tau_edown\"]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 66,
   "id": "competitive-emergency",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Processing: TTJets.root isData: False isTT: True corrLevel cent\n",
      "Processing: TTJets.root isData: False isTT: True corrLevel jes_up\n",
      "SF 1.1 0.9\n",
      "JESUP\n",
      "Processing: TTJets.root isData: False isTT: True corrLevel jes_down\n",
      "SF 1.1 0.9\n",
      "Processing: TTJets.root isData: False isTT: True corrLevel tau_eup\n",
      "SF 1.0 1.0\n",
      "Processing: TTJets.root isData: False isTT: True corrLevel tau_edown\n",
      "SF 1.0 1.0\n"
     ]
    }
   ],
   "source": [
    "importlib.reload(selection)\n",
    "importlib.reload(jetmet)\n",
    "def event_selection():\n",
    "    \n",
    "    samples = {}\n",
    "    for sample in mc:\n",
    "        \n",
    "        #!!!!!!! Careful with JER application before Tau?!\n",
    "        \n",
    "        if \"TTJets\" in sample: isTT = True\n",
    "        else: isTT = False\n",
    "            \n",
    "        if \"Run2011\" in sample: isData = True\n",
    "        else: isData = False\n",
    "        \n",
    "        path = \"/eos/user/l/llayer/opendata_files/preselection_merged/\" + sample + \".root\"\n",
    "        \n",
    "        df, cut_flow = selection.event_selection(path, isData = isData, isTT = isTT)\n",
    "    \n",
    "        samples[sample + \"_cent\"] = df\n",
    "        \n",
    "        if isData == False:\n",
    "            \n",
    "            for c in corrections:\n",
    "                df, cut_flow = selection.event_selection(path, isData = isData, isTT = isTT, corrLevel = c,\n",
    "                                                        tau_factor = 0.1, jes_factor = 0.1)\n",
    "                samples[sample + \"_\" + c] = df\n",
    "        \n",
    "        \n",
    "    return samples\n",
    "\n",
    "samples = event_selection()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 89,
   "id": "mysterious-brazil",
   "metadata": {},
   "outputs": [],
   "source": [
    "def candidates(sample, df, invert_btag = False, njets=-1, scale_met=None, isData=False):\n",
    "\n",
    "    df['nJets'] = df[\"Jet_pt\"].str.len()\n",
    "    \n",
    "    # b-tagging\n",
    "    df[\"Jet_nbtags\"] = df[\"Jet_csvDisc\"].apply( lambda x : btag.count_btags(x, njets=njets) )\n",
    "    if invert_btag:\n",
    "        df = btag.no_tag(df)\n",
    "    else:\n",
    "        df = btag.at_least_1tag(df)\n",
    "\n",
    "    # MET cut\n",
    "    if scale_met != None:\n",
    "        df['MET_met'] = df['MET_met'] * scale_met\n",
    "    df = selection.met_requirement(df)\n",
    "\n",
    "    \n",
    "    # HL features\n",
    "    df = pd.concat([df, df.apply(lambda ev : pd.Series(hl.hlFeatures(ev, njets=njets)), axis=1)], axis=1)\n",
    "    \n",
    "\n",
    "    # MC weights\n",
    "    if not isData:\n",
    "\n",
    "        hlt_40, hlt_45 = weights.lumi()\n",
    "        total_lumi = hlt_40 + hlt_45\n",
    "        trigger_frac = hlt_40 / float(hlt_45)\n",
    "        df = pd.concat([df, df.apply(lambda ev: pd.Series(btag.eval_sf_eff(ev)), axis=1)], axis=1)\n",
    "        df[\"Jet_btag_weight1\"] = df.apply(lambda ev : btag.b_weight_method1(ev, njets=njets), axis=1)\n",
    "        #if (key == \"central\") | (key == \"centJER\"):\n",
    "        #    df[\"Jet_btag_weight1_up\"] = df.apply(lambda ev : btag.b_weight_method1(ev, syst='up', njets=njets), axis=1)\n",
    "        #    df[\"Jet_btag_weight1_down\"] = df.apply(lambda ev : btag.b_weight_method1(ev, syst='down', njets=njets), axis=1)\n",
    "        #df[\"Jet_btag_weight2\"] = df.apply(lambda ev : btag.b_weight_method2(ev, njets=njets), axis=1)\n",
    "        # trigger weights\n",
    "        #df[\"trigger_weight\"] = df.apply(lambda ev : weights.trigger_weight(ev, trigger_frac), axis=1)\n",
    "        df = pd.concat([df, df.apply(lambda ev: pd.Series(weights.trigger_weight(ev, trigger_frac)), axis=1)], axis=1)\n",
    "        # normalization\n",
    "        counts_path = \"/eos/user/l/llayer/opendata_files/preselection_merged/\" + sample + \"_counts.root\"\n",
    "        total_counts = root_pandas.read_root(counts_path)\n",
    "        xsec = weights.get_xsec(sample)\n",
    "        weights.norm(df, total_counts, xsec, lumi = total_lumi)\n",
    "        \n",
    "        # PDF\n",
    "        #if (\"TTJets\" in sample) & (key == \"centJER\"):\n",
    "        #    pdf = pd.read_hdf(\"TTJets_pdfweights.h5\")\n",
    "        #    df = pd.merge(df, pdf, how=\"left\", on=[\"event\", \"luminosityBlock\", \"run\"])\n",
    "\n",
    "    # QCD\n",
    "    if isData & invert_btag:\n",
    "        \n",
    "        # Assume light flavour\n",
    "        def lf(nJets):\n",
    "            return np.zeros((nJets))\n",
    "        df[\"Jet_flavour\"] = df[\"nJets\"].apply(lf)\n",
    "        df = pd.concat([df, df.apply(lambda ev: pd.Series(btag.eval_sf_eff(ev)), axis=1)], axis=1)\n",
    "        df[\"btag_weight\"] = df.apply(lambda ev : btag.b_weight_method2(ev, njets=njets), axis=1)\n",
    "        \n",
    "    return df"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 90,
   "id": "experimental-victoria",
   "metadata": {},
   "outputs": [],
   "source": [
    "def proc_candidates(samples, njets = -1):\n",
    "    \n",
    "    cand_samples = {}    \n",
    "    \n",
    "    for sample in mc:\n",
    "        for key in [\"cent\"] + corrections:\n",
    "            print( sample + \"_\" + key )\n",
    "            df = samples[sample + \"_\" + key]\n",
    "            cand_samples[sample + \"_\" + key] = candidates(sample, df)  \n",
    "\n",
    "    #new_samples = rearrange_samples(cand_samples)\n",
    "    return cand_samples"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 91,
   "id": "liquid-circuit",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "TTJets_cent\n",
      "TTJets_jes_up\n",
      "TTJets_jes_down\n",
      "TTJets_tau_eup\n",
      "TTJets_tau_edown\n"
     ]
    }
   ],
   "source": [
    "cands = proc_candidates(samples)\n",
    "#print(cands)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 92,
   "id": "liberal-friendly",
   "metadata": {},
   "outputs": [],
   "source": [
    "features = ['ht', 'aplanarity', 'sphericity', 'chargeEta', 'met', 'deltaPhiTauMet', 'mt', 'mTauJet']\n",
    "for sample in cands:\n",
    "    cands[sample][\"bdt\"] = bdt.predict_proba(cands[sample][features].values)[:,0]    "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "pleased-cemetery",
   "metadata": {},
   "outputs": [],
   "source": []
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "immune-berry",
   "metadata": {},
   "outputs": [],
   "source": []
  },
  {
   "cell_type": "code",
   "execution_count": 70,
   "id": "checked-terminology",
   "metadata": {},
   "outputs": [],
   "source": [
    "import plot\n",
    "import ROOT"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 106,
   "id": "premium-activation",
   "metadata": {},
   "outputs": [],
   "source": [
    "variables = [\n",
    "    {\"var_name\" : \"bdt\", \"bins\" : 15, \"xlow\" : 0., \"xup\" : 1., \"xtitle\" : \"bdt\"}\n",
    "    #{\"var_name\" : \"MET_met\", \"bins\" : 30, \"xlow\" : 0., \"xup\" : 400, \"xtitle\" : \"MET [GeV]\"}\n",
    "]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 107,
   "id": "clean-teacher",
   "metadata": {},
   "outputs": [],
   "source": [
    "def vars_to_histos(samples, variables):\n",
    "    file = ROOT.TFile(\"test_histos.root\", 'recreate')\n",
    "    for name, sample in samples.items():\n",
    "        for var in variables:\n",
    "            plot.save_var(sample, name, var[\"var_name\"], var[\"bins\"], var[\"xlow\"], var[\"xup\"])\n",
    "    file.Close()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 108,
   "id": "respective-wedding",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "TTJets_cent bdt None\n",
      "TTJets_jes_up bdt None\n",
      "TTJets_jes_down bdt None\n",
      "TTJets_tau_eup bdt None\n",
      "TTJets_tau_edown bdt None\n"
     ]
    }
   ],
   "source": [
    "vars_to_histos(cands, variables)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 109,
   "id": "front-comedy",
   "metadata": {},
   "outputs": [],
   "source": [
    "f = ROOT.TFile(\"test_histos.root\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 110,
   "id": "south-prefix",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "TFile**\t\ttest_histos.root\t\n",
      " TFile*\t\ttest_histos.root\t\n",
      "  KEY: TH1D\tTTJets_cent_bdt;1\tTTJets_cent_bdt\n",
      "  KEY: TH1D\tTTJets_jes_up_bdt;1\tTTJets_jes_up_bdt\n",
      "  KEY: TH1D\tTTJets_jes_down_bdt;1\tTTJets_jes_down_bdt\n",
      "  KEY: TH1D\tTTJets_tau_eup_bdt;1\tTTJets_tau_eup_bdt\n",
      "  KEY: TH1D\tTTJets_tau_edown_bdt;1\tTTJets_tau_edown_bdt\n"
     ]
    }
   ],
   "source": [
    "f.ls()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 111,
   "id": "friendly-heating",
   "metadata": {},
   "outputs": [],
   "source": [
    "var = variables[0]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 112,
   "id": "ignored-there",
   "metadata": {},
   "outputs": [],
   "source": [
    "hist_cent = f.Get(\"TTJets\" + \"_cent_\" + var[\"var_name\"])\n",
    "hist_jes_up = f.Get(\"TTJets\" + \"_jes_up_\" + var[\"var_name\"])\n",
    "hist_jes_down = f.Get(\"TTJets\" + \"_jes_down_\" + var[\"var_name\"])\n",
    "hist_tau_eup = f.Get(\"TTJets\" + \"_tau_eup_\" + var[\"var_name\"])\n",
    "hist_tau_edown = f.Get(\"TTJets\" + \"_tau_edown_\" + var[\"var_name\"])"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 113,
   "id": "static-asset",
   "metadata": {},
   "outputs": [],
   "source": [
    "up = hist_jes_up\n",
    "down = hist_jes_down\n",
    "cent = hist_cent\n",
    "#up = hist_tau_eup\n",
    "#down = hist_tau_edown"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 114,
   "id": "every-colonial",
   "metadata": {},
   "outputs": [
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning in <TH1D::Sumw2>: Sum of squares of weights structure already created\n",
      "Warning in <TH1D::Sumw2>: Sum of squares of weights structure already created\n",
      "Warning in <TCanvas::Constructor>: Deleting canvas with same name: c\n"
     ]
    },
    {
     "data": {
      "image/png": "iVBORw0KGgoAAAANSUhEUgAAAxwAAAMECAIAAAC64LSpAAAABmJLR0QAAAAAAAD5Q7t/AAAgAElEQVR4nO3dT7LbyJ0ncKDDV3CUo/sU5WWVVAC2s/Fm5grSrmrmBARvMKFVS2eYhcsTMVsCIYW96tIhJsZddh2Cs0gLRpHvDx/5I4Fkfj6hUJB4eGSCwEN+mZlI1Pv9vgIA4DL/snQBAADugVAFABBAqAIACCBUAQAEEKoAAAIIVQAAAX6zdAGA4vR9PwxD3/dt2x78KC0ZhmH+9Fj69Wm149d/7BcBrkeoAm5tu91WX6LVfPkwDOM4zpekp03TPP2CJ64GcFW1yT+BG6vrOj04OP+0bZvi0bS8ruvNZtP3/bMv2DTNYw1XALdhTBWwgNSqdBCDxnHU2gTkS6gCltE0zbwJKgWsZxulAFbLmCpgGX3fd103f/pgM9V2uz1o0GrbVvYCVkhLFbCMgwv9xnEUlYCsaakCFpN6AIdhSNGqbdvjweanDFQHWAMtVcBi+r5Pl/s91vcHkBEtVcBiUg9gila73W7p4gBcRKgCltQ0TZoL9InJ04/7BE2YDqyQUAUsKV0D+ETf3ziO84sEk91uJ1cBa2NGdQCAAAaqAwAEEKoAAAIIVQAAAYQqAIAAQhUAQAChCgAggFAFABBAqAIACCBUAQAEEKoAAAIIVQAAAYQqAIAAQhUAQAChCgAggFAFABBAqAIACCBUAQAE+M3SBbipuq6XLgIAFGS/3y9dhNspK1SdoqjdDwDXU1pbRnGhSmYCAK7BmCoAgABCFQBAAKEKACCAUAUAEECoAgAIkFmoGobhYEnf933fH6zT9/3xmgAA15NTqBqGoeu6eVqq6zo9nR6kdaqq6rruIGwBAFxPncu8TW3bjuNYVdVut2vbtqqq1ByVslTKT33f13U9rVDXh1t3vAQAuJLSqt1sJv+cWqTmS1J4Sv190/K08GAdAICryqn779h2u63rOjVQHf+0aZrjkVX1xW6xYQBAbjIOVeM4Nk2z3++HYdhsNie2SO0vduXNAuBX6rrW50AWMg5VTdNMf2bTiKu5cRz9HQIsbhgGzfyUIONQ1bbt1LvX933TNFVVNU3z2PgqAIDryThUpfCUxjmN4zhNqbDdbtu2TZcBLltCgBz1fd+27fyL6yRd/dO27fEEgdO12Ae/O11LNM0gOH8wf53pd02IQ64uH2O0uN1u9+yS5D62F+BKpu+iqe2/qqrNZjP9dFp4XIM0TTP9dHqQTsWbzWZaP71aejCt/OD7zl98Wo3bq6r3l/16WdVuYVtb2N4FeJHjqDQ9TTFo+sqaYtCUddKa8wQ2/2la+eBd5jlp/kbT+tN7CVULEqpeJJt5qgCKVdcfrvGy+/2b+dPUJTdvWEqdfen/7XZ7cHnQZrPZbrfzV5h32zVNc3z90PHbHf9i9WU4rIkGLxdx5Ly97BqD9xcXICdCFcDaHaSfK0kp5yDHHAyrmqefS26xetCTOKWo6svQ2LNfmbnLj5y6vuhF6rquqlscvSshVAHwTw82DqW4M47jceNTSHvSdNvWqqqapjluA4MsZHz133lMmA7whIP2p3nz1XzI1CSkh67ruqZp0iCqgzuPsazbtJLejeJC1bOjzJYuIMAy5n1wSWpAmk+OcLB+yBfR+VwMD74R5KK4UAXAg9q2bZpmu91OmSZ1yU3NVOM4Tm1Ifd+P4zgf1f6sx6JSev3pleddgZAXY6oA+Ic0QGqeaaYZpFLo2W6302ingztYPCv18T0YrdIgqqnda7fbdV2X3khXIBmpi+rwquuythfgDFPueWLQ+hlDqZ7+xeM3PfuNWI/Sqt3CtrawvQsACyqt2jWmCgB42AcXxb+EUAUAEMBAdQC4T5e3M72tquqCFynrJjXGVAEAj/lQ128uqDdLq3Z1/wEABCiu++/Z+X+LytQAQJSy2uVKa4cEgAWVVu3q/gMACCBUAQAEEKoAAAIIVQAAAYQqAIAAQhUAQAChCgAggFAFABDAjOqHipqmDACIUlyokpkAgGvQ/QcAPKz+8Ez3DnNCFQD/MAzDMAyPLen7Pj3u+75t277vb1w8WLmy7nRY2p0dAV6kbduqqua5qm3bcRzTmbOu66ZpxnGc/8put0u/xQoFtDO9rar3F73A/k1B1W5xY6oAONs4jpvNJrVRDcPQdV3Xdb6srtblgaau6ktepK7r6s2FRciJ7j8AXmDq9WvbdrPZVL9u2YKSZdZSNQzDg+3M8+VpBEDbtlqkgfvw4bm5YM7z5uUtTE3TzJ+2bbvdbh87M3MHiuq8u1xOoSo1NR/336du/vRVKa2z2WzS/8ZRAnfgjPRzG7IUzGXT/de2bdd1Dy6fP02pq+/7/X6/3W5vVDiAO3UwLP1A+jYrWkGSTagahuF4LGT6e06d+pP5n7eefoAXeTpFHfxUbwDMZROqHtR13ROxaeoTnKsvdtUtAljcdOZ8sAmqrutptqpxHJum0VIFSU5jqg60bbvb7V76Wy79BXjMMAx1XU9jLVI/wLx1Kg1Un1Z48LsrFCvjUDWO43yU1fHEnuM4apoGeJH9fv/0SKn5HOvaqGAu41A1Rah054T0R940Td/382lUlikcQLaePXM6tcKDMg5VD0pt18MwjON4RucgAMB5MgtVD46IOujjS23XvkgBhHNqhSeUdYNhN1QGgJsprdrNe0oFAICVEKoAAAIIVQAAATIbqH65Z6dEL6r3FwCIUlyokpkAgGvQ/QcAEECoAgAIIFQBAAQQqgAAAghVAAABhCoAgABCFQBAAKEKACBAcaGqfs7SBQRYkb7vnRjhRGZUBwAIUFxLFQDANQhVAPxK3/dt2/Z9/8RPD1YYhuH46TAM899KT4dhSA+m15mvBlmri+oOq+uythfgRYZh6LpuvqRpmnEcpzPn8fiq9KO+77fb7bRa27bjODZNMwWmuq7T07Ztq6oax3F68aqqdrtdWs6dKa3a1VIFwD+kRLXb7fb7/X6/32w2KfQkKfdMP93tdtPC9P/UWJV+a/rdqWlq+mnTNPv9fhiGKZNde9PgBsqKkKVFZuA+1B+ucv3d/s2vzoepmWqz2cwjTmqaSmfOqbVp+mlqkTr+aV3Xm81mu92mJqj5avPHxy/CnSmt2i3u6j+A7ByknytJeeigG27qoUsOfpry0MGaKZOlDsHU35eapq5ZdlgF3X8A/NNjY5sejFzp6bx3L41DnyLU1KxlyBQlEKoAqKpfJ6QTfzpPWtMK4zimx2lI1tRwdY0yw6qU1dlZWucuwIscj5o6GFNV/XoK5YPhUNO1gWko1fxawoMLA42pKkRp1W5xLVVuUwPwmDQuampVOuiz22w284V934/jmBbOV6h+3XY1Xw73rbhQtX/O0gUEWEwaDrXdbtOXzIPM1Pd96tFLP91utweXCqYUdTwm3YAqClFWu1xp7ZAAZ3h2dPmDg9bhWGnVbmFbW9jeBYAFlVbtFtf9BwBwDUIVAECAzELV8QQqfd8fTH9yfHd0AIBryylUpSlPjidQGYahruu0fJoWpes6c80BADeTzQiy6Q5TaU65qqpSc9R0e4T0uK7raYXj8XGljZgDgAWVVu1m01I1DMPBjmnb9sG2qPlVvjoBAYDb+M3SBTjfFJ6GYdhut7vd7mCFdLOFg5lULp8zvajQDQCcKONQlaRuwanL71kiEQBwDdl0/z2oruu2bff7/YOJarpTOgDAtWUcqtq2PbjtVFVVTdMc34gKAODaMhuWf3Bx3/xHaQRVWp5utH7cJ1jaZQgAsKDSqt3MxlTN981j+2m/3x+PTwcAuKqyImRpkRkAFlRatZvxmCoAgPUQqgAAAghVAAABhCoAgACZXf13uWdvU1PUkDoAIEpxoUpmAgCuQfcfAEAAoQoAIIBQBQAQQKgCAAggVAEABBCqAAACCFUAAAGEKgCAAMVN/mlGdQDgGooLVTITAHANuv8AAAIIVQAAAYQqAIAAQhUAQAChCgAggFAFABBAqAIACCBUAQAEEKoAAAIUN6O629QAANdQXKiSmQCAa9D9BwAQQKgCAAggVAEABBCqAAACZBaqhmE4WNL3fd/3B+v0fX+8JgDA9eQUqoZh6Lpunpbquh6GYRiGaaKEtE5VVV3XHYQtAIDrqXOZYqBt23Ecq6ra7XZt21ZVlZqjUsZq27Zt277v67qeVqjrw607XgIAXElp1W42LVXDMBzsmGEYUniqqqpt26kFa1pYPdRdCABwDdmEqmPjOM5D1fEKTdMch6r6YtfdKgAgTxnPqN40zfT49BapotohAYCbybilqnouS82bsgAArirjUDWfN2G73aZr/ZqmmV/0J1QBALeRcfdfCkzpqsCmadLTNL3CMAzjOO52u2VLCACUI/trHefXAD69sCrv2k4AWFBp1W5hW1vY3gWABZVW7WY8pgoAYD2EKgCAAEIVAEAAoQoAIEDGUyqc59n7zBQ1pA4AiFJcqJKZAIBr0P0HABBAqAIACCBUAQAEEKoAAAIIVQAAAYQqAIAAQhUAQAChCgAgQHGTf5pRHQC4huJClcwEAFyD7j8AgABCFQBAAKEKACCAUAUAEECoAgAIIFQBAAQQqgAAAghVAAABhCoAgADFzajuNjUAwDUUF6pkJgDgGnT/AQAEEKoAAAIIVQAAAYQqAIAA2Q9U7/u+qqq2bdu2PViY/gcAuIG8W6rquh6GoaqqruumCJUWDsPw7OwJAABR6nynGBiGoeu6VP7pcd/3KVFVX5qv5u1VdZ3x9gJAXkqrdjNuqUr9fSk/9X3fNE16OvUDtm2bfgoAcG15j6nabDZd16XHKQuP4zg1TT0Yqi7vEywqdAMAJ8q4pWoYhu12u9vt9vv9ZrNJDVSpvWpa4fi39he71fYBADnJO1Q1TZOyVN/34zhOyxcsFQBQpoxDVdu2x0EqDVRPj7fbrVkVAIDbyDtUNU1T13Xbtl3X7Xa76svo9bZt67qe2rEAAK7tHq51nF/x99iSpLRrOwFgQaVVu4VtbWF7FwAWVFq1m3H3HwDAeghVAAABhCoAgAB5z6h+hmdnVC+q9xcAiFJcqJKZAIBr0P0HABBAqAIACCBUAQAEEKoAAAIIVQAAAYQqAIAAQhUAQAChCgAggFAFABCguBnV3aYGALiG4kKVzAQAXIPuPwCAAEIVAEAAoQoAVurDc+OAWRWhCgAgQHED1QHgZi5sanpbVdVlr/DG5Vk3JFQBwLVcmmnqWirKiO4/AIAAdVHzNtV1WdsLAAsqrdotrvvPjOoAwDUUF6pkJgDgGoypAgAIIFQBAAQQqgAAAghVAAABhCoAgADZh6phGPq+H4ZhvrDv+77vlykQAFCkvENV3/dd11VV1XXdlKLquh6GYRiGZ6ekAgCIkvdUp9NUrVN7Vfo/NVy1bdu27bzJqrSpXQFgQaVVuxm3VA3D0DRNetC2bQpS6XFaYVoIAHBteYeqcRzruu77Pv1fVdU4jvNQdfxb9cVut4UAQD4yDlXJfr8fhmG3222326qqUttV8mAz1f5iN9s0AApX1x+WLgIvkPG9/+a9e/NGqXkPIAAs6OJU9PbCDpL9/s1lBeAF8h5BNh+o3nVdarWaZlio63q3280DVmkj5gDIWl1/yDoVlVbt5t39t9ls6rpu27brut1uV31psmrbtq7rpmk0WQEAt3EPEfK4v++xHsDSIjMALKi0arewrS1s7wLAgkqrdvPu/gMAWAmhCgAggFAFABAg43mqzvPslOhF9f4CAFGKC1UyEwBwDbr/AAACCFUAAAGEKgCAAEIVAEAAoQoAIIBQBQAQQKgCAAggVAEABBCqAAACFDejutvUAADXUFyokpkAgGvQ/QcAK1V/eKZ3hVURqgAAAhTX/QcAN3NpU9Pbqq4ueoX9G4NebkeoAoBruTDT1FUtFWWkLmrgdl2Xtb0AsKDSql1jqgAAAghVAAABhCoAgADFDVQ3ozoAcA3FhSqZCQC4Bt1/AAABhCoAgABCFQBAAKEKACCAUAUAEOBOQlXf9wdPD5YAwBk+PDcRD0zu4aY8fd9vt9tpQ+q6bpqmqqpxHA+2rrSbEAFwYSp6W1XvLyvAm4LrndKq3ey3dhiGruuqLxNQ9X0/DMMwDFVVtW3btu28yaq0vQvAhT7Udcmp6EKlVbvZd/91Xbfb7aanwzC0bZset22b0hUAnEei4nR5h6q2bXe73ZSiqqoax3Eeqo5/pb7YLTYMAMhNxrepSf16B8kpjaZKHmymKqodEgC4mYxbqoZhGMdxaj2q6zqlKF1+AMDt3ckIsmko3DAMaax6WnjQOVjaiDkAWFBp1W7GLVUPShGqbds0scKDw6oAAMLdZ4ScXwM4V1pkBoAFlVbtFra1he1dAFhQadXuvXX/AQAsQqgCgEfV9Yeli0A2Mp6nCgCedXEqenvhrM/7/ZvLCkA2igtVz06JXlTvL8DduzDT1LVUxKmKC1UyEwBwDWUNyy/tMgQAWFBp1a6B6gCs1we3sScfxXX/AXBLF6ait1VVXZyr3pTUWMKChCoArujSQFPXIhG5KKuzs7TOXQBYUGnVrjFVADzFqCY4ke4/gDu3+Kgm/XcUQqgCuHNGNcFtlNXZ+ex06pXZQYGV+SDTkK3SxlQV11JV1N4F1mDx3rdKBxzcRHGhCuDG9L5BIVz9B/CMZS9/KzxR1fWHpYsAp9JSBdy/xTvgSg5GF6eit5dn2v3+zaUvAScQqoD7pwNuQRcGmroWiciG7j8gAzrgirV4oqo/mPuUU2mpAq7u8kikA46zXZqK3lZ1ddEr7N849kohVAFXFxBodMBxrgszTV3VUhEnKmtWrtJmIQO4XF1/WLwPjkyVVu1qqQK4c4tffyeTUYiyIqTb1MB53CllQRqKyJeWqjtX1N6FiYmaFrR4Q1GlrQhuorhQBWUyUdMlLmwrMlETFKKsdrnS2iEJtHj/1+IFyNrlbUVV9f6S35eKKFNp1a6WKkqxeP/XhQrvgNNWBKyfUEUpsu//WrwAF4i4J+6SF6BJVMApsm+X6/u+qqq2bdu2PViY/p8rrR0S7oYr4IpVfzD3ZsZKq3bzbqmq67ppmrZtu65rmmYYhmlhVd6+vHsGFS1o8UwjUeVr8bvEVG4Uw61kHDuGYei6bip/ilB93w/DkNJVar6at1eJWQsKufvbRUOFMx9UdCEjtcmUlqqslVbtZtxS1bbtbrc7WDgMw9QP2LZtSlesweWBpvA62UhtyiRRkZGMQ1VVVVN+qut6s9lUVTWO49Q09WCoOmVS9acVFbqJYqQ2wN3LO1RVVdX3/Xa73Ww2KUul0VTJg81UIhGLuDyUaCtiKTrg4ER5h6rUUnWQk+Y9gAQqfJy4kdos5fJMs/hQcZmMQmQcqoZhGMfxIFH1fT91/2232+NBV8u6fP7JC0dqX/juy04+eWGsWfz+a1JRsRbPNNVlsaautFTBSfIOVdWvx0jt9/vURtW27TiOabaFZQr3iLznn7zs3ev6w9ucY43eN852aTvT0plGooIT3ee1jo/1AJZ2beedWbwDjmIZVATnKa3aLWxrC9u7QHJ5B9yFXe8yGWUqrdrNuPuPlzL9I0u5NNNUC8eaxTvggCyUFSFzj8zL9n/pfSvZ4v1fixcAOEPu1e5Laam6qawvQJOosrb4BWgXRiKJClg/oeqm3CqEs13YVJP7BWgA61dWu9wp96gp6gPhdBdmmtwHFQGcQfffnStq7zKXe/+XtiKAlSsrQpYWme/MskOVDZQGeKnSqt3iWqpYSkj/14JtRRIVAE8rK0LmHpk1lgCQkdyr3ZfSUnVTiw/rufDdDZQGgMcIVTeV9VBlA6UB4AlltcuV1g4JAAsqrdr9l6ULkJMPF05nDgDcr7K6/95fFozeVlV1ca56U1JmB4BylNUud8qM6k8Mxn5fvX174VBtd9ADoBildf8VtrWF7V0AWFBp1a4xVQAAAcqKkJdPE3Vx75+5mgAoRWktVWUNVK/eXnRDZRM1AQCPKStClhaZAWBBpVW7xlQBAAQQqnJy2pQQK5V14SvlX1rW5c+68JXyLyrrwhdIqAIACCBUAQAEEKoAAAIUF6rq51Qn92GfslrgS53u9gULLP/tC3b7D//E1Rw8L+XgucZLnc7B86LVHDx3qbB5qqqL5qkCAHhMcS1VAADXIFQBAAQQqgAAApQ1f7yBdQBwS2XFjKK2FgDgSnT/AQAEEKoAAAIIVQAAAYQqAIAAQhUAQAChCgAgQFn3/jNPFQDcUlEzN5UVqqrC9i4ALKi0towrdv8Nw3C9FwcAWJX4UNW2bV3XdV13XZce9H0f/i4AAKsS3P2XGvqapmnbtm3bYRiGYdhut1VViVYAwB2LvPdf3/fb7Xa327Vte7x8DYOZnujcXUPxAOCe1HVZtxiO3Nq2bcdxfPAF67o+DltnO2Unpaayg+ax0vYuACyotGo3s3mqhmE4JZn1fT+O4/WLAwDwD5GhKsWd44v+0vLLm6n6vu+67tm0NI3iAgC4mchQlfrauq5L/W7DMPR9X9f1OI6bzSbk9ff7/bMv1XXdbrdrmubydwQAOFHw1X/7/T6NrBrHcWou2mw2N7v0r23bdO3hYyucMRFZUf3BAMB54mdUn7r/Thz/FPvWj42Un0hIAMA1XPE2NTdOVFVVdV3XNE1qFUtDr/q+Nz8WAHADAaFqmrwgDaJ6bLUb3LUmjaOa3sgFgADAzQSEqnl2WSTH9H0/TeA+LXxwnioAgCsJCFXTKKW2bRcZsZRGxN++txEAYBI51Wm609+DjUOp0Wjx3OM2NQBwM2ZUP99js26mi/IC3+gS+0csXS4AIG8xEfKUyZ/WEFxKi8wAsKDSqt2YKRV2u1315Y576TEAQFFuNKZqJUqLzACwoNKq3Rtt7Uom4TRQHQBuprRQdZXb1BzP87ndbtPEUeFv91JF7V0A4GaCI+TKm4JKi8wAsKDSqt3IKRVSB99ut0uf4Gaz2e/3ady60esAwH0Lnqeq+jKz+WazmZ7udruu6wLfCABgbSJDVfXllsZVVbVtO034mWLWDW6oDACwlMhQNQ9Sq1U/YulysXbvHSQFW3bvf1j62HPww4mCQ1VVVXVdD8OQHrdtOz0O9EQGSm+XctKDkzi4TQ0v9cvnz3/67ruqqn58/fqXz5+XLk6hlqrX17D3Fzw9rWHzISPBoWq32009gLvdbhzHruvGcWyaJiRaPRvRuq5LxdhsNtvtdg2TY5G7v/zww88fP9ZV9bdPn/78/fdLF6c4y9bry+79xTONgx9e5OrXOs5Hr1+o7/vphs0PFjutMP3oeCxXadd2MndeH0o6XOpHnr7IG8feWf703Xc/f/yYHn/16tUfvjx+kUz3fsi2V9luPnegtGo3v609SE5zBwHu/kLVh7p2brq9H1+//tunT+nxV99++4cvjznd2aOCFq/XQ/b+4pmmWnTzL/S+rt8672Ur92r3pcJmVO/7PvXNzXvcUqAZhuGxGBRr3h42DMODd3c+Y0z6eg6ItZRjIUudW7959+7P33//86dPv/v222/evbt9Ae7AJV8G5vX6725er4fs/bM3f9ltr5Y++H/5/PkvP/xQVdWPr19/8+7db7/++sYFSP46jv/6ZVgLPOOxgdunOw4u+/2+OToEL3+jZLPZPPtq6d3TNKRzgcW4sb//9NOPr1//e1X98dWrv//009LFubU1bP6/Z3vwhFhw8//+009/fPXq36vqj99++/f/+I9FyrDU5q9h2/fLbf6Pr1+/r6r074+vXt2+AGs48+Qu32r3PAHtcqntZ7PZpIaiaZ7PaUkVNKYqeaL7r6qqYRi6rmua5sFpsfJth4waWpGpNWz+4n2vSzXUpdaC//z48XevXi3YWrBsH9Cyez/3/q98ez/XcObJXb7V7nliQtVms5l6/VKsmS+J9fSYqq7rdrvdYxlu8b27+MllwYoh31E1i1s21qykXlk81HJ7USO6Sj7xLm7xavfGwsZUTaYZqsJf+TF937dtOx/ONTVT3bIYp8h3aEV18dflfEfVLO7gsvYFL3/7+dOn9+dOlXthvVJytVSsqBFdJZ94ubGYULVsdknzLEzzuc/vM3jcD/hYjbDyKF34cNE7GCoe1VB3+1izhnqFMv3266//8PHj+7pe6qgr/MTLGWK6/w563I6XrETu7ZBLfWVZSQdQsd/Ylr2s/ZfPn+f1ym9///tbvjssrvAT74Vyr3ZfKr77j+u58D4duXcAFXv7sWW/Li/eWgDLujBR5X7i5UViQtXxpXbHS1bYcJWdpUalrKQDqNhTwxpiTZlthHC53E+8vEjYlArPWkMDYGntkFF0AK2By9+gKPdx4i2t2g3Y2hOnTljDvY1L27uxih3SBLCU/zcM/5ZzP09p1W5hW/t4o1pRn8N5tJQA8CJC1T0rbe8CwIJKq3b/ZekCAADcA6HqBc6evxEAuHtC1QsU1IIJALxQcaGqfsTTv/XL589/+u67qqp+fP36l8+fb1JSACAnZY0gO3vE3H3cLgAAbqm0gep3vrUHu7Ou6/cvf5GD2wUcPH0psxIAUIjSQtXd3vtvGIYHpxs9L9O4XQAA8LT7HFPV933XdeM4Rr3gN+/effXq1b6qvlrijrYAwPrdc7tc3/fb7fag+++S7XWfFgA4ne6/O3fi7Z8fNI3Hml5kOlYsscQSSyyx5P6W/HUc/7VpLnydchQXqkIi8/GLWGKJJZZYYsk9LUlzCf3nx4+/e/Xq7z/99Nuvvz7jdUrLVfc5pgoAuMRffvjh548f66r626dPf/7++6WLk4fiWqoAoBBn310tNTpNv/zzp0/vz2p0OmMao6wJVQBwny6ZGTFkLqG6rt+cXYIMFdf9d3h7mi+WLhcArIi5hM5Q1rWOdWHXdgLAJf7X//mf//W//Pezf720are4lioA4Fmff/n83Z+++2//93+8/vH1518+L12cPJQVIUuLzABwnu/+9N3Hnz+mx6++evXxDx/PeJHSqt3CtrawvQtAyeoP544YPrj87+Dpi17pTUHVblkh468rFd8AAA32SURBVIkB6UV9DgDwtNc/vv70t39c8fftV99++sOZV/8VVb0WN6Zq/4ilywUAK/Lum3evvnpV7atvv/r23Teu/jtJWRGytMgMAJcY/t/Q/lt79q+XVu0WtrWF7V0AWFBp1W5x3X+XOH/EHwBw74SqlygobQMAL5NZqOr7vq7rtm2HYXhwhWEY2rZ9Yp3zblOT5kCrqsocaADczPjXceki8AI5haq+77fb7W63a9u267oHM1PXdW3bTuscr3De1X8//OWHjz9/rOrq098+ff/n70M2BwAek77Mt/+79WU+IzmNIKvrOqWlqqrS/we5KqWuaYvqut5sNn3f//MVzhsUFTcHWlXYNGgAnCdkQvPFlTZQPZutHYah67qptAdPH1w4D2HTkvO2N2QOtMvV7+v92zz2FwDVCr7ML/tNvrRQ9ZulCxCpbdvNZjMNkNpsNvNEdYl337z7/s/ff/r507e/W2YOtM+/fP7hLz9UVfX6x9fvvnn39W+/vn0ZAHipszPNr77M/26xL/O8SDYR8pSWqqqq6rpumiaNUh/H8WCFZwekP+ifTV/LNRTdRzswwEuNfx2bf22WLsUCPv/yef5l/ve//f3SJTpHaS1V2WztKaHqYKDV8birxfdu4e3AWdP3ylJKThU//OWHj//58dXvXhXbQn/hhOaLW7zavbFsuv8OOvIem1Jhvlrbttvt9oplejntwDnS98pSCk8VB5ddL9VCv2yozTpRFSinCDm/mm/+uO/7tm3btn3+6r9sI/Ma2oEXb6pZ6tSm77Vaul5ZQwEWsZJj78IPf/EW+urcL7SFh9oQ+Va758lpa1OXX3rcNM3UWDUPT23bjuN4vM60Zkbbe2ypWLP4mSWkAIuf2S/se7X3F6zYpIpFPvzFL7teSajNWu7V7kvlt7UpJz19WV+aV/14eWl7N8riZ5ZlC7D4mX3Ziq3wvS9VLPvhh7TQLx5qSx7MWlq1W9jWPn71Xwmfw+JnljMtfWpbvO81pGKz98/b+1LF4qliwYEHi4faOyBU3bPS9m6Uxc8sixeguvganDNrtWr5im3xDz+kAFLFeRbf+8ta/AvVHSit2i1sawvbu1EWP7MsXoBlLVuxLf7hL1sAqaLkP70k90kNllVatVvY1ha2d2MtfvXf4gVYyhoqtsU//AXH6S/+4S9OquBspVW7hW1tYXuXe6JiW5APH85TWrVb2NaWPVAdAG6ptFCVzYzqUYrauwDAzfzL0gUAALgHQhUAQAChCgAgQHFjqh4bq26sFQBwicxaqvq+r+u6bduDOyXPtW1b13Vd1w+us3/E9coMAJQgp1DV9/12u93tdm3bdl33YGZK91He7XabzeaxdQAAwuU0gURd1ylRVV/C00FmGoah67ppi/q+b9s2rTm9QkbbCwBZK63azWZrDwLTwdOk7/thGJ5onSpt7wLAgkqrdnPq/ntWilP1F/M2KgCAq7qrUFVV1TiOu90ujT0fx7Hv+4MV6pdbYjsAgMzcW6hqmmZqoNpsNtvt9mCFx67+e8KttwEAyFA2oeqgL++JS/8AAG4vm1CVTN152+12s9lMC1PG6vt+HMcpb83XAQC4qpyG5acr/tLjpmmm8FTX9WazSXkrzWV1vM60ZkbbCwBZK63azW9rU056uqdvGIYHV3hi1Hl2nwMArJxQdc9K27sAsKDSqt3MxlQVLuv5HbIufKX8S8u6/FkXvlL+RWVd+AIJVQAAAYSqB5z4zeCU1QJf6nS3L1hg+W9fsNt/+Ceu5uB5KQfPNV7qdA6eF63m4LlLQhUAQICyRpBJ1gBwS2XFjKK2FgDgSkrp/uv7vq7rtm0fvL/NCp1Y4L7vj28avaxnS55mEUs3q15b4avTyp8Kv87D6fRDvW3bHD//g/udr2oXnPLhTwf/qkqePF3+qeSrvd/86SefFf7xZl34p63tOLmuM24wnJ10s5rdbjc9WLpEzzixwLvdrqqqzWZz08I96ZSSpzJP6+RV/ukzn9ZZopiPOv1QX+GHv3/h8ZPcuoiPO6XwTdM0TbPOc9EpB/9c2pYFCvqIM04+Ny/jo3I/8zwmHSe5lDZEEZs6P0bXdiJ40CkFnmLxqurFZ0t+cDpY2+44pfzzhdl9/kk6Qa+t8PuTj/xbFul0zxY+fezT01RB3qhwJ3jpeXJtO+KlJ59VHf/PFv5gYdM06yn8Y+b33l26LLdz/5t6cCI7eLpCLyrwqv60Tin5QevCqkLVGeVfVWPD6UdOKvaqDp79yZ//9IU+u8IfJPJVeel5MrW3Xb1YJzv94JmerueP95TCH/y1rurM+bSM2tVClDKmipVo23a6LeMwDOM4rnBYzxOm8qfBDZvN5unbUK5Q27ZN02RX7CQNJem6bhiG7Xab11iNVPhpNFKmu6D68pebXfnbtt1sNtPnn90f73a7nR6P47hgSXiCUMUy2rbtum632+V1XpukaDI/zWUhVYd5jXKdS/Xifr8fhmG/31fP3Vt9bcZxnFpHsvtGMUl/uUuX4hzb7TY1+WT3xzsl8vR1buni8CihiltLV89VVbXf7/OqEef6vh+GoWmavOrFrutSmfu+T+kqr/IfXLG42Wzy+so+byPcbDZ51etJqt1z/MtNX4TSMZ/+ePPaiv1+n1rXptHfrNBvli7A1R382az/O3p2BZ6cUvJhGFbbQHVK+VP331Svr+ra5lPKn87F049WlUhOPH4O1lxJ7XLiwbOeo+XA6aedvu/nA5BX4sTyz1dr23YlofbEws+/Ao3juMK9QFWVMXysml3lUa3pio/HPFbg48uF1jbW+NmSpypwfmH2IuV8zLPlX/MFRPuXHDn79R08+8w//1M+/Go2OHpVhd+ffPBUqxnffeC+D5756PX1X241V9pA9SI2dd79n8UVE48V+PgssLZ68dmSH8f6Ve2RUz751RZ+/5IjZ7++g2d/WvnnTVOr+vxPKfy8dWFVhd+fVv41V+d3f/DMC7/OXPug0kJVQbepyW4oQHYFnuRb8uTZ8q98A1devGedUv40u/RNivMyWRe+cvAsKvczD5V7/wEAhHD1HwBAAKEKACCAUAUAEECoAgAIIFQBAAQQqgAAAghVAAABhCoAgABCFQBAAKEKACCAUAUAEECoAgAIIFQBAAQQqgAAAghVAAABhCoAgABCFQBAAKEKACCAUAUAEECoAgAIIFQBAAQQqgAAAghVAAABhCoAgABCFQBAAKEKACCAUAUAEECoAgAIIFQBAAQQqgAAAghVAAABhCoAgABCFQBAAKEKACCAUAUAEECoAgAIIFQBAAQQqgAAAghVAAABhCoAgABCFQBAAKEKACCAUAUAEECoAgAIIFQBAAQQqgAAAghVAAABhCoAgABCFQBAAKEKACCAUAUAEECoAgAIIFQBAAQQqgAAAghVAAABhCoAgABCFQBAAKEKACCAUAUAEECoAgAIIFQBAAQQqgAAAghVAAABhCoAgABCFQBAAKEKACCAUAUAEECoAgAIIFQBAAQQqgAAAghVAAABhCoAgABCFQBAAKEKACCAUAUAEECoAgAIIFQBAAQQqgAAAghVAAABhCoAgABCFQBAAKEKACCAUAUAEECoAgAIIFQBAAQQqgAAAghVAAABhCoAgABCFQBAAKEKACCAUAUAEECoAgAIIFQBAAQQqgAAAghVAAABhCoAgABCFQBAAKEKACCAUAUAEECoAgAIIFQBAAQQqgAAAghVAAABhCoAgABCFQBAAKEKACCAUAUAEECoAgAIIFQBAAQQqgAAAghVAAABhCoAgABCFQBAAKEKACCAUAUAEECoAgAIIFQBAAQQqgAAAghVAAABhCoAgABCFQBAAKEKACCAUAUAEECoAgAIIFQBAAQQqgAAAghVAAABhCoAgABCFQBAAKEKACCAUAUAEECoAgAIIFQBAAQQqgAAAghVAAABhCoAgABCFQBAAKEKACCAUAUAEECoAgAIIFQBAAQQqgAAAghVAAABhCoAgABCFQBAAKEKACCAUAUAEECoAgAIIFQBAAQQqgAAAghVAAABhCoAgABCFQBAAKEKACCAUAUAEECoAgAIIFQBAAQQqgAAAghVAAABhCoAgABCFQBAAKEKACCAUAUAEECoAgAIIFQBAAQQqgAAAghVAAABhCoAgABCFQBAAKEKACCAUAUAEECoAgAIIFQBAAQQqgAAAghVAAABhCoAgABCFQBAAKEKACCAUAUAEECoAgAIIFQBAAQQqgAAAghVAAABhCoAgABCFQBAAKEKACCAUAUAEECoAgAIIFQBAAQQqgAAAghVAAABhCoAgABCFQBAAKEKACCAUAUAEECoAgAIIFQBAAQQqgAAAghVAAABhCoAgABCFQBAAKEKACCAUAUAEECoAgAIIFQBAAQQqgAAAghVAAABhCoAgABCFQBAAKEKACCAUAUAEECoAgAIIFQBAAQQqgAAAghVAAABhCoAgABCFQBAAKEKACCAUAUAEECoAgAIIFQBAAQQqgAAAghVAAABhCoAgABCFQBAAKEKACCAUAUAEECoAgAIIFQBAAQQqgAAAghVAAABhCoAgABCFQBAAKEKACCAUAUAEECoAgAIIFQBAAQQqgAAAghVAAABhCoAgABCFQBAAKEKACCAUAUAEECoAgAIIFQBAAQQqgAAAghVAAABhCoAgABCFQBAAKEKACCAUAUAEECoAgAIIFQBAAQQqgAAAghVAAABhCoAgABCFQBAAKEKACCAUAUAEECoAgAIIFQBAAQQqgAAAghVAAABhCoAgAD/H09lVtG3vritAAAAAElFTkSuQmCC\n",
      "text/plain": [
       "<IPython.core.display.Image object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "ROOT.gStyle.SetOptStat(0)\n",
    "\n",
    "ratio_up = plot.createRatio(up, cent)\n",
    "ratio_down = plot.createRatio(down, cent)\n",
    "\n",
    "c, pad1, pad2 = plot.createCanvasPads()\n",
    "\n",
    "# draw everything\n",
    "pad1.cd()\n",
    "cent.Draw()\n",
    "up.Draw(\"SAME\")\n",
    "up.SetLineColor(ROOT.kRed+2)\n",
    "down.Draw(\"SAME\")\n",
    "down.SetLineColor(ROOT.kGreen+2)\n",
    "\n",
    "cent.SetTitle(\"MET\")\n",
    "leg = ROOT.TLegend(0.6, 0.65, .8, .89);\n",
    "leg.AddEntry(cent, \"central\", \"l\");\n",
    "leg.AddEntry(up, \"up\", \"l\");\n",
    "leg.AddEntry(down, \"down\", \"l\");\n",
    "leg.SetBorderSize(0)\n",
    "leg.Draw(\"SAME\")\n",
    "\n",
    "pad2.cd()\n",
    "ratio_up.Draw(\"ep\")\n",
    "ratio_up.SetLineColor(ROOT.kRed+2)\n",
    "ratio_up.SetMarkerColor(ROOT.kRed+2)\n",
    "ratio_down.Draw(\"epSAME\")    \n",
    "ratio_down.SetMarkerColor(ROOT.kGreen+2)\n",
    "ratio_down.SetLineColor(ROOT.kGreen+2)\n",
    "ratio_down.GetXaxis().SetTitle(var[\"xtitle\"])\n",
    "\n",
    "f1 = ROOT.TLine(0, 1., 1,1.)\n",
    "f1.SetLineColor(ROOT.kBlack)\n",
    "f1.SetLineStyle(ROOT.kDashed)\n",
    "f1.Draw(\"same\")\n",
    "\n",
    "c.Draw()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 85,
   "id": "subtle-annotation",
   "metadata": {},
   "outputs": [],
   "source": [
    "import pickle"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 86,
   "id": "twenty-powder",
   "metadata": {},
   "outputs": [],
   "source": [
    "bdt = pickle.load(open(\"bdt/xgb.pkl\", \"rb\"))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "prescribed-appendix",
   "metadata": {},
   "outputs": [],
   "source": []
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "coastal-midnight",
   "metadata": {},
   "outputs": [],
   "source": []
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "complimentary-outreach",
   "metadata": {},
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.7.6"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 5
}
